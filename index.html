
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Acc√®s s√©curis√© - DevisPro</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f4f4; text-align: center; padding: 50px; }
    input { padding: 10px; font-size: 16px; width: 250px; }
    button { padding: 10px 20px; font-size: 16px; margin-top: 20px; cursor: pointer; }
    .error { color: red; margin-top: 10px; }
  </style>
</head>
<body>
  <h2>üîí Acc√®s s√©curis√© √† DevisPro</h2>
  <p>Entrez votre code d'acc√®s :</p>
  <input type="text" id="codeInput" placeholder="Code d'acc√®s"><br>
  <button onclick="verifierCode()">Entrer</button>
  <div class="error" id="errorMsg"></div>

  <script>
    const codes = {{
      "artisan123": 7,
      "chantier456": 3,
      "client789": 5
    }};

    function verifierCode() {{
      const code = document.getElementById("codeInput").value.trim();
      const now = new Date().getTime();
      const errorMsg = document.getElementById("errorMsg");

      if (!codes.hasOwnProperty(code)) {{
        errorMsg.innerText = "‚ùå Code invalide.";
        return;
      }}

      const storageKey = "devispro_" + code;
      let record = localStorage.getItem(storageKey);

      if (!record) {{
        // Nouveau code utilis√©
        const expireTime = now + codes[code] * 24 * 60 * 60 * 1000;
        localStorage.setItem(storageKey, expireTime);
        window.location.href = "app.html";
      }} else {{
        if (now < parseInt(record)) {{
          window.location.href = "app.html";
        }} else {{
          errorMsg.innerText = "‚ö†Ô∏è Code expir√©.";
        }}
      }}
    }}
  </script>
</body>
</html>
